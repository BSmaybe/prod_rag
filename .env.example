# --- App ---
API_PORT=8080
APP_TITLE=RAG Agent API
LOG_LEVEL=INFO
# Optional integration keys (API endpoints do not require X-API-Key by default)
SERVICE_API_KEY=
SERVICE_DESK_API_KEY=
TOP_K=5
PROCESS_TOP_K=5
NO_CONTEXT_MIN_HITS=2
NO_CONTEXT_SCORE_THRESHOLD=0.35
OUTBOX_POLL_SEC=2
OUTBOX_BATCH_SIZE=50
OUTBOX_MAX_ATTEMPTS=8
OUTBOX_BACKOFF_BASE_SEC=5
PROCESS_TICKET_ASYNC=true
JOB_POLL_SEC=1
JOB_BATCH_SIZE=20
VECTOR_BACKEND=qdrant
INGEST_BACKEND=qdrant

# --- Qdrant / Embeddings (active) ---
QDRANT_URL=http://qdrant:6333
COLLECTION_NAME=kb_tickets
QDRANT_VECTOR_SIZE=384
QDRANT_DISTANCE=Cosine
EMBEDDING_MODEL=/app/model_data
EMBEDDING_DEVICE=cpu
SENTENCE_TRANSFORMERS_HOME=/app/st_cache

# --- Postgres journal (active) ---
POSTGRES_DB=rag
POSTGRES_USER=rag
POSTGRES_PASSWORD=rag
POSTGRES_PORT=5432
DB_URL=postgresql://rag:rag@postgres:5432/rag

# --- Ollama (active) ---
OLLAMA_URL=http://ollama:11434/api/generate
OLLAMA_MODEL=qwen2.5:7b-instruct-q4_k_m
OLLAMA_MAX_RETRIES=1
OLLAMA_RETRY_BACKOFF_BASE_SEC=2
OLLAMA_TIMEOUT_SEC=60
OLLAMA_NUM_PREDICT=200

# --- Service Desk callback / ingestion ---
SD_MAX_BATCH=500
SD_MAX_TEXT_LEN=10000
SD_RAW_DIR=data/sd_raw
SD_EVENTS_DIR=data/sd_events
SD_STATE_DIR=data/sd_state
NEW_TICKETS_DIR=data/new_tickets

# --- n8n (orchestration) ---
N8N_HOST=localhost
N8N_PORT=5678
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change-me
N8N_PROTOCOL=http
N8N_SECURE_COOKIE=false
WEBHOOK_URL=http://localhost:5678
N8N_WEBHOOK_URL=http://n8n:5678/webhook/ticket-webhook
NAUMEN_API_URL=https://naumen.example/api/tickets

# --- Proxy (optional) ---
http_proxy=
https_proxy=
no_proxy=localhost,127.0.0.1,::1,qdrant,ollama,postgres,n8n,api
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1,::1,qdrant,ollama,postgres,n8n,api

# --- Legacy / compatibility (inactive by default) ---
# RETR_TABLE=documents
# LLM_MODEL_PATH=/app/models/qwen2.5-7b-instruct-q4_K_M.gguf
# LLM_REPHRASE_MODEL_PATH=/app/models/qwen2.5-7b-instruct-q4_K_M.gguf
